## Core of the Experiment: main.py,where and the core functions are main() and main_test()

To use all models completely, you need to download joern(https://github.com/joernio/joern).

- `main()`: This function is primarily used for model training and saving results. It calls the training methods for all models.
- `main_test()`: This function is primarily used to test the trained models on the crossover dataset and save the results. It calls the testing methods for all models.

To run the complete model code, you simply need to uncomment the models for training and testing.

## Experimental Steps:

1. Static Analysis Processing:
   - Different models have different processing methods. Use tools like Joern for data preprocessing.
2. Dataset Split:
   - Divide the dataset into training and testing sets, e.g., using ten-fold cross-validation.
3. Running main.py:
   - Run main.py to perform training and testing of the models.

The result_analyse.ipynb notebook provides sample code for analyzing the results obtained after training and testing all models. It can serve as a reference for researchers.

## Overview of Different Models:

### bert, codebert, LSTM, GRU, TextCNN, astgru:

- Use the corresponding part in `generate_pkl.py` for static processing to convert .c files into .pkl files.
- Run the respective parts of the models in `main.py`.

### VulCNN:

- Refer to the open-source code of VulCNN(https://gitee.com/QISANSAN/vulcnn).

### VulBERTa:

- Refer to the open-source code of VulBERTa (https://github.com/ICL-ml4csec/VulBERTa).
- Use the corresponding part in `generate_pkl.py` for static processing to convert .c files into .pkl files.
- Use `generate_vulberta_data.py` to generate the data files required for VulBERTa.
- Run the respective parts of the models in `main.py`.

### code2vec:

- Run the YAML file using ASTMiner (refer to https://gitee.com/QISANSAN/astminer) along with the official documentation.
- Use `astminer_to_c2v.py` to convert the ASTMiner data files into code2vec's required data format.
- Run the respective parts of the models in main.py.

### devign & reveal:

- Use `joern_graph_gen.py` in the joern folder along with the Joern tool to generate corresponding binary intermediate files from .c files, followed by generating AST and PDG graphs.
- Use `joern_to_devign.py` in the joern folder to convert the graphs generated by Joern into JSON files.
- Use the prepare_devign_reveal() function in main.py to integrate JSON files into dataset files.
- Run the respective parts of the models in main.py.
